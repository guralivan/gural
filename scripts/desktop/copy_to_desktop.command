#!/bin/bash

# –°–∫—Ä–∏–ø—Ç –¥–ª—è –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –∞–Ω–∞–ª–∏–∑–∞ 45.xlsx –Ω–∞ —Ä–∞–±–æ—á–∏–π —Å—Ç–æ–ª
# –°–æ–∑–¥–∞–µ—Ç —è—Ä–ª—ã–∫ –∏ –∫–æ–ø–∏—Ä—É–µ—Ç –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ —Ñ–∞–π–ª—ã

echo "üìÅ –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –∞–Ω–∞–ª–∏–∑–∞ 45.xlsx –Ω–∞ —Ä–∞–±–æ—á–∏–π —Å—Ç–æ–ª..."

# –ü—É—Ç–∏
DESKTOP_PATH="/Users/ivangural/Desktop"
PROJECT_PATH="/Users/ivangural/Downloads/wb_dashboard_streamlit"
APP_NAME="–ê–Ω–∞–ª–∏–∑ 45.xlsx"

# –°–æ–∑–¥–∞–µ–º –ø–∞–ø–∫—É –Ω–∞ —Ä–∞–±–æ—á–µ–º —Å—Ç–æ–ª–µ
DESKTOP_APP_PATH="$DESKTOP_PATH/$APP_NAME"
echo "üìÇ –°–æ–∑–¥–∞—é –ø–∞–ø–∫—É: $DESKTOP_APP_PATH"
mkdir -p "$DESKTOP_APP_PATH"

# –ö–æ–ø–∏—Ä—É–µ–º –æ—Å–Ω–æ–≤–Ω—ã–µ —Ñ–∞–π–ª—ã
echo "üìã –ö–æ–ø–∏—Ä—É—é –æ—Å–Ω–æ–≤–Ω—ã–µ —Ñ–∞–π–ª—ã..."
cp "$PROJECT_PATH/app_45_simple.py" "$DESKTOP_APP_PATH/"
cp "$PROJECT_PATH/requirements_app_45.txt" "$DESKTOP_APP_PATH/"
cp "$PROJECT_PATH/launch_app_45_desktop.command" "$DESKTOP_APP_PATH/"

# –°–æ–∑–¥–∞–µ–º README —Ñ–∞–π–ª –¥–ª—è —Ä–∞–±–æ—á–µ–≥–æ —Å—Ç–æ–ª–∞
cat > "$DESKTOP_APP_PATH/README.txt" << 'EOF'
üìä –ê–Ω–∞–ª–∏–∑ –¥–∞–Ω–Ω—ã—Ö 45.xlsx

üöÄ –ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è:
1. –î–≤–∞–∂–¥—ã –∫–ª–∏–∫–Ω–∏—Ç–µ –Ω–∞ —Ñ–∞–π–ª "launch_app_45_desktop.command"
2. –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –æ—Ç–∫—Ä–æ–µ—Ç—Å—è –≤ –±—Ä–∞—É–∑–µ—Ä–µ –ø–æ –∞–¥—Ä–µ—Å—É: http://localhost:8509

üìÅ –§–∞–π–ª—ã:
- app_45_simple.py - –æ—Å–Ω–æ–≤–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
- requirements_app_45.txt - –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
- launch_app_45_desktop.command - —Å–∫—Ä–∏–ø—Ç –∑–∞–ø—É—Å–∫–∞

‚ö†Ô∏è –í–∞–∂–Ω–æ:
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —É –≤–∞—Å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω Python 3
- –ü—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏: pip install -r requirements_app_45.txt
- –ü–æ–º–µ—Å—Ç–∏—Ç–µ —Ñ–∞–π–ª 45.xlsx –≤ —ç—Ç—É –ø–∞–ø–∫—É –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞

üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞:
–ü—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –ø—Ä–æ–±–ª–µ–º –ø—Ä–æ–≤–µ—Ä—å—Ç–µ:
1. –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –ª–∏ Python 3
2. –ï—Å—Ç—å –ª–∏ —Ñ–∞–π–ª 45.xlsx –≤ –ø–∞–ø–∫–µ
3. –ù–µ –∑–∞–Ω—è—Ç –ª–∏ –ø–æ—Ä—Ç 8509 –¥—Ä—É–≥–∏–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ–º
EOF

# –°–æ–∑–¥–∞–µ–º —è—Ä–ª—ã–∫ –Ω–∞ —Ä–∞–±–æ—á–µ–º —Å—Ç–æ–ª–µ
echo "üîó –°–æ–∑–¥–∞—é —è—Ä–ª—ã–∫ –Ω–∞ —Ä–∞–±–æ—á–µ–º —Å—Ç–æ–ª–µ..."
cat > "$DESKTOP_PATH/–ê–Ω–∞–ª–∏–∑ 45.xlsx.command" << 'EOF'
#!/bin/bash
cd "/Users/ivangural/Desktop/–ê–Ω–∞–ª–∏–∑ 45.xlsx"
./launch_app_45_desktop.command
EOF

# –î–µ–ª–∞–µ–º —è—Ä–ª—ã–∫ –∏—Å–ø–æ–ª–Ω—è–µ–º—ã–º
chmod +x "$DESKTOP_PATH/–ê–Ω–∞–ª–∏–∑ 45.xlsx.command"

# –°–æ–∑–¥–∞–µ–º —Ñ–∞–π–ª —Å –∏–∫–æ–Ω–∫–æ–π (–µ—Å–ª–∏ –µ—Å—Ç—å)
if [ -f "$PROJECT_PATH/icon.png" ]; then
    cp "$PROJECT_PATH/icon.png" "$DESKTOP_APP_PATH/"
    echo "üé® –ö–æ–ø–∏—Ä—É—é –∏–∫–æ–Ω–∫—É..."
fi

echo ""
echo "‚úÖ –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —É—Å–ø–µ—à–Ω–æ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–æ –Ω–∞ —Ä–∞–±–æ—á–∏–π —Å—Ç–æ–ª!"
echo ""
echo "üìÅ –ü–∞–ø–∫–∞: $DESKTOP_APP_PATH"
echo "üîó –Ø—Ä–ª—ã–∫: $DESKTOP_PATH/–ê–Ω–∞–ª–∏–∑ 45.xlsx.command"
echo ""
echo "üöÄ –î–ª—è –∑–∞–ø—É—Å–∫–∞:"
echo "1. –î–≤–∞–∂–¥—ã –∫–ª–∏–∫–Ω–∏—Ç–µ –Ω–∞ —è—Ä–ª—ã–∫ '–ê–Ω–∞–ª–∏–∑ 45.xlsx.command' –Ω–∞ —Ä–∞–±–æ—á–µ–º —Å—Ç–æ–ª–µ"
echo "2. –ò–ª–∏ –ø–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –ø–∞–ø–∫—É –∏ –∑–∞–ø—É—Å—Ç–∏—Ç–µ 'launch_app_45_desktop.command'"
echo ""
echo "üåê –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ –ø–æ –∞–¥—Ä–µ—Å—É: http://localhost:8509"
