#!/bin/bash

# –ü—Ä–æ—Å—Ç–æ–π —Å–∫—Ä–∏–ø—Ç –∑–∞–ø—É—Å–∫–∞ –∫–∞–ª–µ–Ω–¥–∞—Ä—è –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–∞

echo "üìÖ –ó–∞–ø—É—Å–∫ –ö–∞–ª–µ–Ω–¥–∞—Ä—è –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–∞ –∏ –ª–æ–≥–∏—Å—Ç–∏–∫–∏..."

# –ü–µ—Ä–µ—Ö–æ–¥–∏–º –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –ø—Ä–æ–µ–∫—Ç–∞
cd "/Users/ivangural/Downloads/wb_dashboard_streamlit"

# –ê–∫—Ç–∏–≤–∏—Ä—É–µ–º –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ
source venv/bin/activate

# –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –ø—Ä–æ—Ü–µ—Å—Å –Ω–∞ –ø–æ—Ä—Ç—É 8506 –µ—Å–ª–∏ –æ–Ω –∑–∞–Ω—è—Ç
if lsof -Pi :8506 -sTCP:LISTEN -t >/dev/null ; then
    echo "‚ö†Ô∏è  –ü–æ—Ä—Ç 8506 —É–∂–µ –∑–∞–Ω—è—Ç. –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—é –ø—Ä–æ—Ü–µ—Å—Å..."
    lsof -ti:8506 | xargs kill -9
    sleep 2
fi

# –ó–∞–ø—É—Å–∫–∞–µ–º –∫–∞–ª–µ–Ω–¥–∞—Ä—å –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–∞
echo "üöÄ –ó–∞–ø—É—Å–∫ –∫–∞–ª–µ–Ω–¥–∞—Ä—è –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–∞ –Ω–∞ –ø–æ—Ä—Ç—É 8506..."
streamlit run production_calendar.py --server.port 8506 --server.address localhost

echo ""
echo "‚úÖ –ö–∞–ª–µ–Ω–¥–∞—Ä—å –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–∞ –∑–∞–ø—É—â–µ–Ω –Ω–∞ http://localhost:8506"
