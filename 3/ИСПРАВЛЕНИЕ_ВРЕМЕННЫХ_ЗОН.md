# üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã —Å –≤—Ä–µ–º–µ–Ω–Ω—ã–º–∏ –∑–æ–Ω–∞–º–∏

## üö® –ü—Ä–æ–±–ª–µ–º–∞

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≤—ã–¥–∞–≤–∞–ª–æ –æ—à–∏–±–∫—É:
```
TypeError: Cannot compare tz-naive and tz-aware timestamps
```

## üîç –ü—Ä–∏—á–∏–Ω–∞

–î–∞–Ω–Ω—ã–µ –≤ —Ñ–∞–π–ª–µ `3.xlsx` —Å–æ–¥–µ—Ä–∂–∞—Ç –¥–∞—Ç—ã —Å –≤—Ä–µ–º–µ–Ω–Ω—ã–º–∏ –∑–æ–Ω–∞–º–∏ (tz-aware timestamps), –∞ –ø—Ä–∏ —Å—Ä–∞–≤–Ω–µ–Ω–∏–∏ —Å –¥–∞—Ç–∞–º–∏ –∏–∑ `st.date_input` –ø–æ–ª—É—á–∞—é—Ç—Å—è –¥–∞—Ç—ã –±–µ–∑ –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –∑–æ–Ω (tz-naive).

## ‚úÖ –†–µ—à–µ–Ω–∏–µ

### 1. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤ –æ—Å–Ω–æ–≤–Ω–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏

–í —Ñ–∞–π–ª–µ `weekly_expenses_analyzer.py` –±—ã–ª–∏ –≤–Ω–µ—Å–µ–Ω—ã —Å–ª–µ–¥—É—é—â–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è:

#### –ê. –û–±—Ä–∞–±–æ—Ç–∫–∞ –¥–∞—Ç –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è
```python
# –£–±–∏—Ä–∞–µ–º –≤—Ä–µ–º–µ–Ω–Ω—ã–µ –∑–æ–Ω—ã –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–≥–æ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è
df_display = df.copy()
df_display['–î–∞—Ç–∞ –Ω–∞—á–∞–ª–∞'] = df_display['–î–∞—Ç–∞ –Ω–∞—á–∞–ª–∞'].dt.tz_localize(None)
df_display['–î–∞—Ç–∞ –∫–æ–Ω—Ü–∞'] = df_display['–î–∞—Ç–∞ –∫–æ–Ω—Ü–∞'].dt.tz_localize(None)
```

#### –ë. –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö
```python
# –£–±–∏—Ä–∞–µ–º –≤—Ä–µ–º–µ–Ω–Ω—ã–µ –∑–æ–Ω—ã –∏–∑ –¥–∞—Ç –≤ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–≥–æ —Å—Ä–∞–≤–Ω–µ–Ω–∏—è
df_filtered = df.copy()
df_filtered['–î–∞—Ç–∞ –Ω–∞—á–∞–ª–∞'] = df_filtered['–î–∞—Ç–∞ –Ω–∞—á–∞–ª–∞'].dt.tz_localize(None)
df_filtered['–î–∞—Ç–∞ –∫–æ–Ω—Ü–∞'] = df_filtered['–î–∞—Ç–∞ –∫–æ–Ω—Ü–∞'].dt.tz_localize(None)
```

#### –í. –û–±—Ä–∞–±–æ—Ç–∫–∞ –¥–∞—Ç –≤ –≥—Ä–∞—Ñ–∏–∫–∞—Ö
```python
# –£–±–∏—Ä–∞–µ–º –≤—Ä–µ–º–µ–Ω–Ω—É—é –∑–æ–Ω—É –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–≥–æ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è
date_without_tz = row['–î–∞—Ç–∞ –Ω–∞—á–∞–ª–∞'].tz_localize(None) if row['–î–∞—Ç–∞ –Ω–∞—á–∞–ª–∞'].tz is not None else row['–î–∞—Ç–∞ –Ω–∞—á–∞–ª–∞']
```

### 2. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤ —Ç–µ—Å—Ç–æ–≤–æ–º —Å–∫—Ä–∏–ø—Ç–µ

–í —Ñ–∞–π–ª–µ `test_expenses_data.py` –¥–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∏–ø–∞ –¥–∞–Ω–Ω—ã—Ö:
```python
# –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ —Å—Ç–æ–ª–±—Ü—ã —Å–æ–¥–µ—Ä–∂–∞—Ç datetime –æ–±—ä–µ–∫—Ç—ã
if pd.api.types.is_datetime64_any_dtype(df_display['–î–∞—Ç–∞ –Ω–∞—á–∞–ª–∞']):
    df_display['–î–∞—Ç–∞ –Ω–∞—á–∞–ª–∞'] = df_display['–î–∞—Ç–∞ –Ω–∞—á–∞–ª–∞'].dt.tz_localize(None)
```

### 3. –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–π

–î–æ–±–∞–≤–ª–µ–Ω –ø–∞—Ä–∞–º–µ—Ç—Ä `utc=True` –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –¥–∞—Ç:
```python
df['–î–∞—Ç–∞ –Ω–∞—á–∞–ª–∞'] = pd.to_datetime(df['–î–∞—Ç–∞ –Ω–∞—á–∞–ª–∞'], errors='coerce', utc=True)
df['–î–∞—Ç–∞ –∫–æ–Ω—Ü–∞'] = pd.to_datetime(df['–î–∞—Ç–∞ –∫–æ–Ω—Ü–∞'], errors='coerce', utc=True)
```

## üéØ –†–µ–∑—É–ª—å—Ç–∞—Ç

–ü–æ—Å–ª–µ –≤–Ω–µ—Å–µ–Ω–∏—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π:
- ‚úÖ –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫
- ‚úÖ –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ –¥–∞—Ç–∞–º —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- ‚úÖ –ì—Ä–∞—Ñ–∏–∫–∏ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ
- ‚úÖ –¢–µ—Å—Ç–æ–≤—ã–π —Å–∫—Ä–∏–ø—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç –±–µ–∑ –æ—à–∏–±–æ–∫

## üìã –ü—Ä–æ–≤–µ—Ä–∫–∞

–î–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π –∑–∞–ø—É—Å—Ç–∏—Ç–µ:
```bash
cd 3
source venv/bin/activate
python test_expenses_data.py
```

–î–æ–ª–∂–µ–Ω –≤—ã–≤–µ—Å—Ç–∏:
```
‚úÖ –í—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ —Å—Ç–æ–ª–±—Ü—ã –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É—é—Ç!
–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≥–æ—Ç–æ–≤–æ –∫ —Ä–∞–±–æ—Ç–µ!
```

---
*–î–∞—Ç–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è: 2024*  
*–í–µ—Ä—Å–∏—è: 1.1*
